# PostgreSQL defaults (CloudNativePG operator)

# Namespace
postgresql_namespace: postgresql

# CNPG operator settings
cnpg_operator_namespace: cnpg-system

# Cluster settings
postgresql_cluster_name: postgresql
postgresql_replicas: "{{ 3 if ha_enabled else 1 }}"

# Storage
postgresql_storage_class: "{{ storage_class }}"
postgresql_storage_size: 20Gi

# Resources
postgresql_resources:
  requests:
    cpu: 100m
    memory: 256Mi
  limits:
    cpu: 500m
    memory: 512Mi

# PostgreSQL settings
postgresql_version: "16"
postgresql_database: postgres
postgresql_username: postgres

# Secrets from CI/CD
postgresql_superuser_password: "{{ secrets.postgresql.superuser_password | default(omit) }}"

# Metrics
postgresql_metrics_enabled: "{{ monitoring_enabled | default(true) }}"

# Backup settings
postgresql_backup_enabled: "{{ env != 'local' }}"
postgresql_backup_schedule: "0 0 2 * * *"
postgresql_backup_retention_days: 7

# CNPG manages TLS natively (no external cert-manager needed)
postgresql_ssl_enabled: "{{ env != 'local' }}"

# Service endpoint (used by dependent services)
postgresql_host: "{{ postgresql_cluster_name }}-rw.{{ postgresql_namespace }}.svc.cluster.local"
postgresql_port: 5432

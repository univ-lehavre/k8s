# Authentik Helm Values
# Generated by Ansible

authentik:
  secret_key: "{{ authentik_secret_key }}"
  log_level: {{ authentik_log_level }}
  error_reporting:
    enabled: {{ authentik_error_reporting_enabled | lower }}

  postgresql:
    host: {{ authentik_postgresql_host }}
    port: {{ authentik_postgresql_port }}
    name: {{ authentik_postgresql_database }}
    user: {{ authentik_postgresql_user }}
    password: "{{ postgresql_superuser_password }}"

  redis:
    host: {{ authentik_redis_host }}
    port: {{ authentik_redis_port }}
    password: "{{ redis_password }}"

  email:
    host: ""
    port: 587
    use_tls: true
    use_ssl: false
    timeout: 10

server:
  replicas: {{ authentik_server_replicas }}

  resources:
    requests:
      cpu: {{ authentik_server_resources.requests.cpu }}
      memory: {{ authentik_server_resources.requests.memory }}
    limits:
      cpu: {{ authentik_server_resources.limits.cpu }}
      memory: {{ authentik_server_resources.limits.memory }}

  metrics:
    enabled: {{ monitoring_enabled | default(true) | lower }}
    serviceMonitor:
      enabled: {{ monitoring_enabled | default(true) | lower }}

worker:
  replicas: {{ authentik_worker_replicas }}

  resources:
    requests:
      cpu: {{ authentik_worker_resources.requests.cpu }}
      memory: {{ authentik_worker_resources.requests.memory }}
    limits:
      cpu: {{ authentik_worker_resources.limits.cpu }}
      memory: {{ authentik_worker_resources.limits.memory }}

# Disable built-in PostgreSQL and Redis
postgresql:
  enabled: false

redis:
  enabled: false

# Bootstrap settings
env:
  AUTHENTIK_BOOTSTRAP_EMAIL: {{ authentik_admin_email }}
  AUTHENTIK_BOOTSTRAP_PASSWORD: "{{ authentik_admin_password }}"
  AUTHENTIK_BOOTSTRAP_TOKEN: "{{ authentik_admin_token }}"

# ArgoCD RBAC ConfigMap
# Generated by Ansible
# Maps SSO groups to ArgoCD roles
apiVersion: v1
kind: ConfigMap
metadata:
  name: argocd-rbac-cm
  namespace: {{ argocd_namespace }}
  labels:
    app.kubernetes.io/name: argocd-rbac-cm
    app.kubernetes.io/part-of: argocd
data:
  policy.default: {{ argocd_rbac_default_policy }}
  scopes: {{ argocd_rbac_scopes }}
  policy.csv: |
{{ argocd_rbac_policy | indent(4, first=True) }}

    # Project-specific roles
    p, role:project-admin, applications, *, */*, allow
    p, role:project-admin, clusters, get, *, allow
    p, role:project-admin, repositories, get, *, allow
    p, role:project-admin, repositories, create, *, allow
    p, role:project-admin, repositories, update, *, allow
    p, role:project-admin, repositories, delete, *, allow

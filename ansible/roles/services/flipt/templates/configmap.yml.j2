# Flipt ConfigMap
# Generated by Ansible
apiVersion: v1
kind: ConfigMap
metadata:
  name: flipt-config
  namespace: {{ flipt_namespace }}
data:
  config.yml: |
    log:
      level: info
      encoding: json

    server:
      protocol: http
      host: 0.0.0.0
      http_port: 8080
      grpc_port: 9000

    db:
      protocol: postgres

    cache:
      enabled: true
      backend: memory
      ttl: 60s

    authentication:
      required: {{ flipt_auth_required | lower }}
      methods:
        token:
          enabled: {{ flipt_auth_enabled | lower }}
          cleanup:
            interval: 1h
            grace_period: 30m

{% if flipt_metrics_enabled %}
    meta:
      telemetry_enabled: false
{% endif %}

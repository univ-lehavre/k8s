# Flipt Feature Flags defaults

# Namespace
flipt_namespace: flipt

# Image settings
flipt_image: flipt/flipt
flipt_image_tag: "{{ versions.helm_charts.flipt }}"

# Resources
flipt_resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 256Mi

# Storage (for file-based backend)
flipt_storage_class: "{{ storage_class }}"
flipt_storage_size: 1Gi

# Database settings (PostgreSQL backend)
flipt_database_enabled: true
flipt_postgresql_host: "postgresql.postgresql.svc.cluster.local"
flipt_postgresql_port: 5432
flipt_postgresql_database: "{{ database_config.flipt.database }}"
flipt_postgresql_user: "{{ database_config.flipt.user }}"

# Ingress settings
flipt_ingress_enabled: true
flipt_ingress_host: "flags.{{ domain }}"
flipt_ingress_tls_secret: flipt-tls
flipt_ingress_issuer: "{{ tls_issuer }}"

# Forward Auth (Keycloak via Envoy Gateway SecurityPolicy)
flipt_forward_auth_enabled: true

# Authentication
flipt_auth_enabled: true
flipt_auth_required: true

# Autoscaling (production only)
flipt_hpa_enabled: "{{ env == 'production' }}"
flipt_hpa_min_replicas: 1
flipt_hpa_max_replicas: 2
flipt_hpa_target_cpu: 75

# Metrics
flipt_metrics_enabled: "{{ monitoring_enabled | default(true) }}"

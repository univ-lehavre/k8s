# Cilium Helm Values
# Generated by Ansible

# Operator configuration
operator:
  replicas: {{ cilium_operator_replicas }}
  resources:
    requests:
      cpu: {{ cilium_resources.operator.requests.cpu }}
      memory: {{ cilium_resources.operator.requests.memory }}
    limits:
      cpu: {{ cilium_resources.operator.limits.cpu }}
      memory: {{ cilium_resources.operator.limits.memory }}

# Agent resources
resources:
  requests:
    cpu: {{ cilium_resources.agent.requests.cpu }}
    memory: {{ cilium_resources.agent.requests.memory }}
  limits:
    cpu: {{ cilium_resources.agent.limits.cpu }}
    memory: {{ cilium_resources.agent.limits.memory }}

# kube-proxy replacement
kubeProxyReplacement: {{ cilium_kube_proxy_replacement | lower }}

{% if k3s_type == 'k3s' %}
# K3s specific settings
k8sServiceHost: {{ cilium_k8s_service_host }}
k8sServicePort: {{ cilium_k8s_service_port }}
{% endif %}

# Hubble observability
hubble:
  enabled: {{ cilium_hubble_enabled | lower }}
  relay:
    enabled: {{ cilium_hubble_relay_enabled | lower }}
  ui:
    enabled: {{ cilium_hubble_ui_enabled | lower }}

# Ingress controller
ingressController:
  enabled: {{ cilium_ingress_enabled | lower }}
  default: {{ cilium_ingress_default | lower }}
  loadbalancerMode: {{ cilium_ingress_loadbalancer_mode }}

# Encryption
encryption:
  enabled: {{ cilium_encryption_enabled | lower }}
{% if cilium_encryption_enabled %}
  type: {{ cilium_encryption_type }}
{% if cilium_encryption_type == 'wireguard' %}
  wireguard:
    userspaceFallback: {{ cilium_wireguard_userspace_fallback | lower }}
{% endif %}
{% endif %}

# BPF settings
bpf:
  masquerade: true
  tproxy: true

# IPAM mode
ipam:
  mode: kubernetes

# Enable endpoint routes
endpointRoutes:
  enabled: true

# Auto direct routing
autoDirectNodeRoutes: true

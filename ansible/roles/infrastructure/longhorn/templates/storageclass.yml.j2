# Longhorn Encrypted StorageClass
# Generated by Ansible
apiVersion: storage.k8s.io/v1
kind: StorageClass
metadata:
  name: longhorn-encrypted
  annotations:
    storageclass.kubernetes.io/is-default-class: "{{ longhorn_default_storage_class | lower }}"
provisioner: driver.longhorn.io
allowVolumeExpansion: true
reclaimPolicy: {{ longhorn_reclaim_policy }}
volumeBindingMode: {{ longhorn_volume_binding_mode }}
parameters:
  numberOfReplicas: "{{ longhorn_default_replica_count }}"
  staleReplicaTimeout: "2880"
  fromBackup: ""
  fsType: "ext4"
  dataLocality: "{{ longhorn_data_locality }}"
{% if longhorn_encryption_enabled %}
  encrypted: "true"
  csi.storage.k8s.io/provisioner-secret-name: longhorn-crypto
  csi.storage.k8s.io/provisioner-secret-namespace: longhorn-system
  csi.storage.k8s.io/node-publish-secret-name: longhorn-crypto
  csi.storage.k8s.io/node-publish-secret-namespace: longhorn-system
  csi.storage.k8s.io/node-stage-secret-name: longhorn-crypto
  csi.storage.k8s.io/node-stage-secret-namespace: longhorn-system
{% endif %}

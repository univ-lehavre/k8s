# Phase 4: Databases

- name: Phase 4 - Database Deployment
  hosts: localhost
  gather_facts: false
  vars_files:
    - ../vars/helm_versions.yml
    - ../vars/secrets_mapping.yml

  roles:
    - role: platform/postgresql
      tags: [databases, postgresql, platform]
    - role: platform/mariadb
      tags: [databases, mariadb, platform]
    - role: platform/redis
      tags: [databases, redis, platform]

  post_tasks:
    - name: Phase 4 complete
      ansible.builtin.debug:
        msg: |
          Databases deployed (via operators):
          - PostgreSQL (CNPG): postgresql-rw.postgresql.svc.cluster.local:5432
          - MariaDB (Operator): mariadb.mariadb.svc.cluster.local:3306
          - Redis (Spotahome): rfs-redis.redis.svc.cluster.local:6379
